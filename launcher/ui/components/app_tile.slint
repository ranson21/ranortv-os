// components/app_tile.slint

import { Button, VerticalBox, HorizontalBox, ScrollView } from "std-widgets.slint";
import { AppItem } from "app_item.slint";
import { Theme } from "../styles/theme.slint";

export component AppTile inherits Rectangle {
    in property <AppItem> app;
    in property <bool> focused: false;
    in property <bool> large: false;
    callback clicked();

    width: large ? 280px : 200px;
    height: large ? 160px : 120px;
    border-radius: Theme.radius-md;
    background: focused ? Theme.color-surface-focused : Theme.color-surface;
    border-width: focused ? 2px : 0px;
    border-color: Theme.color-text-muted;

    // Focus animation
    opacity: focused ? 1.0 : 0.8;
    animate background { duration: 200ms; }
    animate border-width { duration: 200ms; }
    animate opacity { duration: 200ms; }

    // Drop shadow
    Rectangle {
        x: 2px;
        y: 2px;
        width: parent.width;
        height: parent.height;
        border-radius: parent.border-radius;
        background: Theme.color-shadow;
        z: -1;
    }

    VerticalBox {
        padding: Theme.spacing-sm;
        spacing: Theme.spacing-xs;

        // Icon
        Rectangle {
            height: large ? 80px : 60px;
            background: #667eea;
            border-radius: Theme.radius-sm;
            Text {
                text: app.name;
                color: Theme.color-text;
                font-size: large ? Theme.font-size-title : Theme.font-size-heading;
                font-weight: 600;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
        }

        // App name
        Text {
            text: app.name;
            color: Theme.color-text;
            font-size: large ? Theme.font-size-body : Theme.font-size-sm;
            font-weight: 500;
            horizontal-alignment: center;
            overflow: elide;
        }
    }

    TouchArea {
        clicked => {
            root.clicked();
        }
    }
}
